<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Style.css">
    <title>TPC-Jack Good</title>
</head>
<body>
    <header>
        <div>
             <h1 style="text-align: center;">IMPK Sistema de Alunos </h1>
        </div>
    </header>

    <!-- Login -->
        <div class="login" id="login-screen">
            <h2>Login</h2>
            <small id="small">Login obrigatório</small>
            <p style="text-align: center; color: white;" class="small">Conta demo: <strong>JackGood</strong> / senha <strong>123456</strong></p>
            <label>Usuário</label><input style="width: 96%;" id="login-user" placeholder="Usuário (ex: admin)" />
            <label>Senha</label><input style="width: 96%;" id="login-pass" type="password" placeholder="Senha" />
            <div class="row" style="margin-top:12px">
                 <button style="width: 100%;" onclick="doLogin()">Entrar</button>
                 <p>Não tem uma conta ? <a href="" style="width: 100%;" onclick="createDemoAccount()">Criar conta</a></p>
                 
            </div>
        </div>
  <div class="container" id="app">
    <div id="main-screen" style="display:none">
    <div class="row" style="align-items:center;justify-content:space-between">
      <div>
        <span class="badge" id="user-badge"></span>
        <span class="small" style="margin-left:8px" id="welcome-class"></span>
      </div>
      <div class="actions">
        <button onclick="logout()">Sair</button>
      </div>
    </div>

    <nav>
      <button onclick="showSection('config')">Configurações</button>
      <button onclick="showSection('cadastro')">Cadastrar Estudante</button>
      <button onclick="showSection('disciplinas')">Disciplinas</button>
      <button onclick="showSection('notas')">Lançar Notas</button>
      <button onclick="showSection('relatorios')">Relatórios</button>
      <button onclick="showSection('export')">Exportar Word</button>
    </nav>

  

    <!-- Sections -->
    <div id="config" style="display:none">
      <h2>Configurações — Regras de Transição</h2>
      <div class="row">
        <div class="col">
          <label>Regra: média mínima para transitar</label>
          <input id="cfg-min-average" type="number" min="0" max="20" step="0.1" />
          <label>Pode ter no máximo <em>N</em> disciplinas com nota abaixo do exigido</label>
          <input id="cfg-max-subjects-fail" type="number" min="0" max="20" />
          <label>Nota mínima por disciplina (para considerar 'aprovado' nessa disciplina)</label>
          <input id="cfg-min-subject" type="number" min="0" max="20" step="0.1" />
          <div style="margin-top:12px" class="row">
            <button onclick="saveConfig()">Guardar Configuração</button>
            <button onclick="resetData()" class="danger">Limpar TODOS os dados (apagar)</button>
          </div>
        </div>
        
      </div>
    </div>

    <div id="cadastro" style="display:none">
      <h2>Cadastrar Estudante (até 20 por turma)</h2>
      <div class="row">
        <div class="col">
          <label>Nome completo</label><input id="stu-name" />
          <label>Sexo</label>
          <select id="stu-sex"><option value="M">Masculino</option><option value="F">Feminino</option></select>
          <label>Turma / Classe</label>
          <select id="stu-class">
            <option value="10">10.ª Classe</option>
            <option value="11">11.ª Classe</option>
            <option value="12">12.ª Classe</option>
          </select>
          <label>Número (ID interno)</label><input id="stu-id" placeholder="número/inscrição (único)" />
          <div class="row" style="margin-top:12px">
            <button onclick="addStudent()">Cadastrar</button>
            <button onclick="showStudentsList()">Ver lista</button>
          </div>
          <div class="small" style="margin-top:8px">Validação: máximo 20 estudantes por cada turma.</div>
        </div>
        <div class="col">
          <h3>Lista por Turma</h3>
          <select id="view-class" onchange="renderStudentTable()">
            <option value="10">10.ª Classe</option>
            <option value="11">11.ª Classe</option>
            <option value="12">12.ª Classe</option>
          </select>
          <div id="students-table" style="margin-top:8px"></div>
        </div>
      </div>
    </div>

    <div id="disciplinas" style="display:none">
      <h2>Gerir Disciplinas</h2>
      <div class="row">
        <div class="col">
          <label>Nome da disciplina</label><input id="disc-name" />
          <label>Turma (opcional)</label>
          <select id="disc-class">
            <option value="all">Todas</option>
            <option value="10">10.ª</option>
            <option value="11">11.ª</option>
            <option value="12">12.ª</option>
          </select>
          <div style="margin-top:12px" class="row">
            <button onclick="addDiscipline()">Adicionar</button>
            <button onclick="renderDisciplines()">Ver disciplinas</button>
          </div>
        </div>
        <div class="col">
          <h3>Disciplinas</h3>
          <div id="disc-list"></div>
        </div>
      </div>
    </div>

    <div id="notas" style="display:none">
      <h2>Lançar Notas</h2>
      <div class="row">
        <div class="col">
          <label>Turma</label>
          <select id="grade-class" onchange="renderGradeForm()">
            <option value="10">10.ª</option>
            <option value="11">11.ª</option>
            <option value="12">12.ª</option>
          </select>
          <label>Aluno</label>
          <select id="grade-student"></select>
          <label>Disciplina</label>
          <select id="grade-discipline"></select>
          <label>Nota (0 - 20)</label><input id="grade-value" type="number" min="0" max="20" step="0.1"/>
          <div class="row" style="margin-top:12px">
            <button onclick="saveGrade()">Salvar Nota</button>
            <button onclick="viewGrades()">Ver notas do aluno</button>
          </div>
        </div>
        <div class="col">
          <h3>Notas</h3>
          <div id="grades-view" class="small"></div>
        </div>
      </div>
    </div>

    <div id="relatorios" style="display:none">
      <h2>Relatórios</h2>
      <div class="row">
        <div class="col">
          <label>Selecionar turma</label>
          <select id="report-class" onchange="renderReport()">
            <option value="10">10.ª</option>
            <option value="11">11.ª</option>
            <option value="12">12.ª</option>
          </select>
          <div style="margin-top:8px" class="row">
            <button onclick="renderReport()">Gerar Relatório</button>
            <button onclick="downloadCSV()">Baixar CSV dessa turma</button>
          </div>
        </div>
        <div class="col">
          <div id="report-output"></div>
        </div>
      </div>
    </div>

    <div id="export" style="display:none">
      <h2>Exportar Relatório para Word (.doc)</h2>
      <label>Turma</label>
      <select id="export-class"><option value="10">10.ª</option><option value="11">11.ª</option><option value="12">12.ª</option></select>
      <label>Título do Relatório</label><input id="export-title" value="Relatório de Médias - IMPK 3096" />
      <div style="margin-top:12px" class="row">
        <button onclick="exportToWord()">Gerar e Baixar .doc</button>
      </div>
      <div class="small" style="margin-top:8px">O ficheiro gerado pode ser aberto no Word para impressão física e entrega na defesa.</div>
    </div>

   
  </div>
</div>

<script src="script.js"></script>
</body>
</html>